"undefined"!=typeof jQuery&&!function(a,d){function b(f,h,g){return new Array(g+1-f.length).join(h)+f}function c(){if(1===arguments.length){var e=arguments[0];return"string"==typeof e&&(e=a.fn.timepicker.parseTime(e)),new Date(0,0,0,e.getHours(),e.getMinutes(),e.getSeconds())}return 3===arguments.length?new Date(0,0,0,arguments[0],arguments[1],arguments[2]):2===arguments.length?new Date(0,0,0,arguments[0],arguments[1],0):new Date(0,0,0)}a.TimePicker=function(){var e=this;e.container=a(".ui-timepicker-container"),e.ui=e.container.find(".ui-timepicker"),0===e.container.length&&(e.container=a("<div></div>").addClass("ui-timepicker-container").addClass("ui-timepicker-hidden ui-helper-hidden").appendTo("body").hide(),e.ui=a("<div></div>").addClass("ui-timepicker").addClass("ui-widget ui-widget-content ui-menu").addClass("ui-corner-all").appendTo(e.container),e.viewport=a("<ul></ul>").addClass("ui-timepicker-viewport").appendTo(e.ui),a.fn.jquery>="1.4.2"&&e.ui.delegate("a","mouseenter.timepicker",function(){e.activate(!1,a(this).parent())}).delegate("a","mouseleave.timepicker",function(){e.deactivate(!1)}).delegate("a","click.timepicker",function(f){f.preventDefault(),e.select(!1,a(this).parent())}))},a.TimePicker.count=0,a.TimePicker.instance=function(){return a.TimePicker._instance||(a.TimePicker._instance=new a.TimePicker),a.TimePicker._instance},a.TimePicker.prototype={keyCode:{ALT:18,BLOQ_MAYUS:20,CTRL:17,DOWN:40,END:35,ENTER:13,HOME:36,LEFT:37,NUMPAD_ENTER:108,PAGE_DOWN:34,PAGE_UP:33,RIGHT:39,SHIFT:16,TAB:9,UP:38},_items:function(l,g){var j,e,h=this,k=a("<ul></ul>"),f=null;for(-1===l.options.timeFormat.indexOf("m")&&l.options.interval%60!==0&&(l.options.interval=60*Math.max(Math.round(l.options.interval/60),1)),j=g?c(g):l.options.startTime?c(l.options.startTime):c(l.options.startHour,l.options.startMinutes),e=new Date(j.getTime()+86400000);e>j;){h._isValidTime(l,j)&&(f=a("<li>").addClass("ui-menu-item").appendTo(k),a("<a>").addClass("ui-corner-all").text(a.fn.timepicker.formatTime(l.options.timeFormat,j)).appendTo(f),f.data("time-value",j)),j=new Date(j.getTime()+60*l.options.interval*1000)}return k.children()},_isValidTime:function(f,j){var g=null,h=null;return j=c(j),null!==f.options.minTime?g=c(f.options.minTime):null===f.options.minHour&&null===f.options.minMinutes||(g=c(f.options.minHour,f.options.minMinutes)),null!==f.options.maxTime?h=c(f.options.maxTime):null===f.options.maxHour&&null===f.options.maxMinutes||(h=c(f.options.maxHour,f.options.maxMinutes)),null!==g&&null!==h?j>=g&&h>=j:null!==g?j>=g:null!==h?h>=j:!0},_hasScroll:function(){var f="undefined"!=typeof this.ui.prop?"prop":"attr";return this.ui.height()<this.ui[f]("scrollHeight")},_move:function(f,k,g){var h=this;if(h.closed()&&h.open(f),!h.active){return void h.activate(f,h.viewport.children(g))}var j=h.active[k+"All"](".ui-menu-item").eq(0);j.length?h.activate(f,j):h.activate(f,h.viewport.children(g))},register:function(h,e){var f=this,g={};g.element=a(h),g.element.data("TimePicker")||(g.options=a.metadata?a.extend({},e,g.element.metadata()):a.extend({},e),g.widget=f,a.extend(g,{next:function(){return f.next(g)},previous:function(){return f.previous(g)},first:function(){return f.first(g)},last:function(){return f.last(g)},selected:function(){return f.selected(g)},open:function(){return f.open(g)},close:function(){return f.close(g)},closed:function(){return f.closed(g)},destroy:function(){return f.destroy(g)},parse:function(i){return f.parse(g,i)},format:function(i,j){return f.format(g,i,j)},getTime:function(){return f.getTime(g)},setTime:function(i,j){return f.setTime(g,i,j)},option:function(i,j){return f.option(g,i,j)}}),f._setDefaultTime(g),f._addInputEventsHandlers(g),g.element.data("TimePicker",g))},_setDefaultTime:function(e){"now"===e.options.defaultTime?e.setTime(c(new Date)):e.options.defaultTime&&e.options.defaultTime.getFullYear?e.setTime(c(e.options.defaultTime)):e.options.defaultTime&&e.setTime(a.fn.timepicker.parseTime(e.options.defaultTime))},_addInputEventsHandlers:function(f){var e=this;f.element.bind("keydown.timepicker",function(g){switch(g.which||g.keyCode){case e.keyCode.ENTER:case e.keyCode.NUMPAD_ENTER:g.preventDefault(),e.closed()?f.element.trigger("change.timepicker"):e.select(f,e.active);break;case e.keyCode.UP:f.previous();break;case e.keyCode.DOWN:f.next();break;default:e.closed()||f.close(!0)}}).bind("focus.timepicker",function(){f.open()}).bind("blur.timepicker",function(){setTimeout(function(){f.element.data("timepicker-user-clicked-outside")&&f.close()})}).bind("change.timepicker",function(){f.closed()&&f.setTime(a.fn.timepicker.parseTime(f.element.val()))})},select:function(h,e){var f=this,g=h===!1?f.instance:h;f.setTime(g,a.fn.timepicker.parseTime(e.children("a").text())),f.close(g,!0)},activate:function(g,m){var h=this,j=g===!1?h.instance:g;if(j===h.instance){if(h.deactivate(),h._hasScroll()){var l=m.offset().top-h.ui.offset().top,f=h.ui.scrollTop(),k=h.ui.height();0>l?h.ui.scrollTop(f+l):l>=k&&h.ui.scrollTop(f+l-k+m.height())}h.active=m.eq(0).children("a").addClass("ui-state-hover").attr("id","ui-active-item").end()}},deactivate:function(){var f=this;f.active&&(f.active.children("a").removeClass("ui-state-hover").removeAttr("id"),f.active=null)},next:function(f){return(this.closed()||this.instance===f)&&this._move(f,"next",".ui-menu-item:first"),f.element},previous:function(f){return(this.closed()||this.instance===f)&&this._move(f,"prev",".ui-menu-item:last"),f.element},first:function(f){return this.instance===f?this.active&&0===this.active.prevAll(".ui-menu-item").length:!1},last:function(f){return this.instance===f?this.active&&0===this.active.nextAll(".ui-menu-item").length:!1},selected:function(f){return this.instance===f&&this.active?this.active:null},open:function(m){var g=this,h=m.getTime(),k=m.options.dynamic&&h;if(!m.options.dropdown){return m.element}switch(m.element.data("timepicker-event-namespace",Math.random()),a(document).bind("click.timepicker-"+m.element.data("timepicker-event-namespace"),function(i){m.element.is(i.target)?m.element.data("timepicker-user-clicked-outside",!1):m.element.data("timepicker-user-clicked-outside",!0).blur()}),(m.rebuild||!m.items||k)&&(m.items=g._items(m,k?h:null)),(m.rebuild||g.instance!==m||k)&&(a.fn.jquery<"1.4.2"?(g.viewport.children().remove(),g.viewport.append(m.items),g.viewport.find("a").bind("mouseover.timepicker",function(){g.activate(m,a(this).parent())}).bind("mouseout.timepicker",function(){g.deactivate(m)}).bind("click.timepicker",function(i){i.preventDefault(),g.select(m,a(this).parent())})):(g.viewport.children().detach(),g.viewport.append(m.items))),m.rebuild=!1,g.container.removeClass("ui-helper-hidden ui-timepicker-hidden ui-timepicker-standard ui-timepicker-corners").show(),m.options.theme){case"standard":g.container.addClass("ui-timepicker-standard");break;case"standard-rounded-corners":g.container.addClass("ui-timepicker-standard ui-timepicker-corners")}g.container.hasClass("ui-timepicker-no-scrollbar")||m.options.scrollbar||(g.container.addClass("ui-timepicker-no-scrollbar"),g.viewport.css({paddingRight:40}));var e=g.container.outerHeight()-g.container.height(),j=m.options.zindex?m.options.zindex:m.element.offsetParent().css("z-index"),l=m.element.offset();g.container.css({top:l.top+m.element.outerHeight(),left:l.left}),g.container.show(),g.container.css({left:m.element.offset().left,height:g.ui.outerHeight()+e,width:m.element.outerWidth(),zIndex:j,cursor:"default"});var f=g.container.width()-(g.ui.outerWidth()-g.ui.width());return g.ui.css({width:f}),g.viewport.css({width:f}),m.items.css({width:f}),g.instance=m,h?m.items.each(function(){var n,i=a(this);return n=a.fn.jquery<"1.4.2"?a.fn.timepicker.parseTime(i.find("a").text()):i.data("time-value"),n.getTime()===h.getTime()?(g.activate(m,i),!1):!0}):g.deactivate(m),m.element},close:function(f){var e=this;return e.instance===f&&(e.container.addClass("ui-helper-hidden ui-timepicker-hidden").hide(),e.ui.scrollTop(0),e.ui.children().removeClass("ui-state-hover")),a(document).unbind("click.timepicker-"+f.element.data("timepicker-event-namespace")),f.element},closed:function(){return this.ui.is(":hidden")},destroy:function(f){var g=this;return g.close(f,!0),f.element.unbind(".timepicker").data("TimePicker",null)},parse:function(f,e){return a.fn.timepicker.parseTime(e)},format:function(g,e,f){return f=f||g.options.timeFormat,a.fn.timepicker.formatTime(f,e)},getTime:function(g){var e=this,f=a.fn.timepicker.parseTime(g.element.val());return f instanceof Date&&!e._isValidTime(g,f)?null:f instanceof Date&&g.selectedTime?g.format(f)===g.format(g.selectedTime)?g.selectedTime:f:f instanceof Date?f:null},setTime:function(j,f,h){var e=this,g=j.selectedTime;if("string"==typeof f&&(f=j.parse(f)),f&&f.getMinutes&&e._isValidTime(j,f)){if(f=c(f),j.selectedTime=f,j.element.val(j.format(f,j.options.timeFormat)),h){return j}}else{j.selectedTime=null}return null===g&&null===j.selectedTime||(j.element.trigger("time-change",[f]),a.isFunction(j.options.change)&&j.options.change.apply(j.element,[f])),j.element},option:function(k,f,g){if("undefined"==typeof g){return k.options[f]}var j,e,h=k.getTime();"string"==typeof f?(j={},j[f]=g):j=f,e=["minHour","minMinutes","minTime","maxHour","maxMinutes","maxTime","startHour","startMinutes","startTime","timeFormat","interval","dropdown"],a.each(j,function(l){k.options[l]=j[l],k.rebuild=k.rebuild||a.inArray(l,e)>-1}),k.rebuild&&k.setTime(h)}},a.TimePicker.defaults={timeFormat:"hh:mm p",minHour:null,minMinutes:null,minTime:null,maxHour:null,maxMinutes:null,maxTime:null,startHour:null,startMinutes:null,startTime:null,interval:30,dynamic:!0,theme:"standard",zindex:null,dropdown:!0,scrollbar:!1,change:function(){}},a.TimePicker.methods={chainable:["next","previous","open","close","destroy","setTime"]},a.fn.timepicker=function(j){if("string"==typeof j){var f,g,h=Array.prototype.slice.call(arguments,1);return f="option"===j&&arguments.length>2?"each":-1!==a.inArray(j,a.TimePicker.methods.chainable)?"each":"map",g=this[f](function(){var k=a(this),l=k.data("TimePicker");return"object"==typeof l?l[j].apply(l,h):void 0}),"map"===f&&1===this.length?a.makeArray(g).shift():"map"===f?a.makeArray(g):g}if(1===this.length&&this.data("TimePicker")){return this.data("TimePicker")}var e=a.extend({},a.TimePicker.defaults,j);return this.each(function(){a.TimePicker.instance().register(this,e)})},a.fn.timepicker.formatTime=function(h,m){var i=m.getHours(),k=i%12,f=m.getMinutes(),j=m.getSeconds(),l={hh:b((0===k?12:k).toString(),"0",2),HH:b(i.toString(),"0",2),mm:b(f.toString(),"0",2),ss:b(j.toString(),"0",2),h:0===k?12:k,H:i,m:f,s:j,p:i>11?"PM":"AM"},g=h,p="";for(p in l){l.hasOwnProperty(p)&&(g=g.replace(new RegExp(p,"g"),l[p]))}return g=g.replace(new RegExp("a","g"),i>11?"pm":"am")},a.fn.timepicker.parseTime=function(){var f=[[/^(\d+)$/,"$1"],[/^:(\d)$/,"$10"],[/^:(\d+)/,"$1"],[/^(\d):([7-9])$/,"0$10$2"],[/^(\d):(\d\d)$/,"$1$2"],[/^(\d):(\d{1,})$/,"0$1$20"],[/^(\d\d):([7-9])$/,"$10$2"],[/^(\d\d):(\d)$/,"$1$20"],[/^(\d\d):(\d*)$/,"$1$2"],[/^(\d{3,}):(\d)$/,"$10$2"],[/^(\d{3,}):(\d{2,})/,"$1$2"],[/^(\d):(\d):(\d)$/,"0$10$20$3"],[/^(\d{1,2}):(\d):(\d\d)/,"$10$2$3"]],e=f.length;return function(n){var g=c(new Date),k=!1,p=!1,h=!1,q=!1,i=!1;if("undefined"==typeof n||!n.toLowerCase){return null}n=n.toLowerCase(),k=/a/.test(n),p=k?!1:/p/.test(n),n=n.replace(/[^0-9:]/g,"").replace(/:+/g,":");for(var j=0;e>j;j+=1){if(f[j][0].test(n)){n=n.replace(f[j][0],f[j][1]);break}}return n=n.replace(/:/g,""),1===n.length?h=n:2===n.length?h=n:3===n.length||5===n.length?(h=n.substr(0,1),q=n.substr(1,2),i=n.substr(3,2)):(4===n.length||n.length>5)&&(h=n.substr(0,2),q=n.substr(2,2),i=n.substr(4,2)),n.length>0&&n.length<5&&(n.length<3&&(q=0),i=0),h===!1||q===!1||i===!1?!1:(h=parseInt(h,10),q=parseInt(q,10),i=parseInt(i,10),k&&12===h?h=0:p&&12>h&&(h+=12),h>24?n.length>=6?a.fn.timepicker.parseTime(n.substr(0,5)):a.fn.timepicker.parseTime(n+"0"+(k?"a":"")+(p?"p":"")):(g.setHours(h,q,i),g))}}()}(jQuery);